(function(b){var f=virtCorreios;function d(a,c,e){b=b.noConflict();b.ajax({type:"POST",url:f.ajaxUrl,data:{action:"autofill_address",postcode:c,nonce:f.nonce},success:function(g){var h=JSON.parse(g);switch(a.attr("id")){case "billing_postcode":q(h,"billing",e);break;case "billing-postcode":s(h,"billing");break;case "shipping_postcode":q(h,"shipping",e);break;case "shipping-postcode":s(h,"shipping");break;default:break}},error:function(g){alert("Erro ao buscar endereço, tente novamente.")}})}function q(a,c,e){$=b.noConflict();
    var p=''; $('#' + c + '_address_1').val(a.logradouro+p); $('#' + c + '_neighborhood').val(a.bairro+p); $('#' + c + '_city').val(a.localidade+p); $('#' + c + '_state').val(a.uf+p); $('#select2-select2-' + c + '_state-container').html(k(a.uf)); $('#' + c + 'postcode').trigger('address_autofill_completed'); if(!a.uf){$('#' + c + 'postcode_field').removeClass('woocommerce-validated').addClass('woocommerce-invalid'); e&&alert("CEP inválido, cálculo com o CEP mais próximo.")}}function s(a,c){if(typeof wp!==
"undefined"&&wp.data&&wp.data.dispatch){var e=wp.data.dispatch("wc/store/cart");e&&("shipping"===c&&"function"===typeof e.setShippingAddress?e.setShippingAddress({address_1:a.logradouro||"",city:a.localidade||"",state:a.uf||""}):"billing"===c&&"function"===typeof e.setBillingAddress&&e.setBillingAddress({address_1:a.logradouro||"",city:a.localidade||"",state:a.uf||""}))}}function k(a){var c={AC:"Acre",AL:"Alagoas",AP:"Amapá",AM:"Amazonas",BA:"Bahia",CE:"Ceará",DF:"Distrito Federal",ES:"Espírito Santo",
GO:"Goiás",MA:"Maranhão",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Pará",PB:"Paraíba",PR:"Paraná",PE:"Pernambuco",PI:"Piauí",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rondônia",RR:"Roraima",SC:"Santa Catarina",SP:"São Paulo",SE:"Sergipe",TO:"Tocantins"};return c[a]}b(document).ready(function(){var a,c,e;if(0<b("#billing_postcode:visible").length&&8===b("#billing_postcode:visible").val().replace(/\D/g,"").length)d(b("#billing_postcode"),b("#billing_postcode").val().replace(/\D/g,
""),!1);if(0<b("#shipping_postcode:visible").length&&8===b("#shipping_postcode:visible").val().replace(/\D/g,"").length)d(b("#shipping_postcode"),b("#shipping_postcode").val().replace(/\D/g,""),!1);b(document).on("blur","#billing_postcode:visible, #billing-postcode:visible, #shipping_postcode:visible, #shipping-postcode:visible",function(){a=b(this);c=b(this).val().replace(/\D/g,"");8===c.length&&d(a,c,!0)})})})(jQuery);
